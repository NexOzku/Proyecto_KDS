<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Completado de Pedidos</title>
    <link rel="stylesheet" href="css/ControlKDS.css">
</head>
<body>
    <div class="header">
        <div class="logo"><div class="logo-emoji">ğŸ½ï¸</div> Control de Pedidos</div>
        <div class="header-stats">
            <div class="stat-card preparing">
                <div class="stat-number" id="preparingCount">0</div>
                <div class="stat-label">Preparando</div>
            </div>
            <div class="stat-card ready">
                <div class="stat-number" id="readyCount">0</div>
                <div class="stat-label">Listos</div>
            </div>
            <div class="stat-card completed">
                <div class="stat-number" id="completedCount">0</div>
                <div class="stat-label">Entregados</div>
            </div>
        </div>
        <div class="controls">
            <button class="btn success" onclick="addSampleOrder('preparing')">â• Simular Preparando</button>
            <button class="btn warning" onclick="addSampleOrder('ready')">ğŸ”” Simular Listo</button>
            <button class="btn danger" onclick="clearAllData()">ğŸ—‘ï¸ Limpiar Todo</button>
        </div>

        <!-- âœ… CONTENEDOR DEL BLOQUE DE USUARIO Y LA LÃNEA -->
        <div class="header-user-container">
            <!-- âœ… LÃNEA SEPARADORA -->
            <div class="header-separator"></div>
            <!-- âœ… BLOQUE DE USUARIO -->
            <div class="header-user-block" id="user-menu-trigger">
                <span class="header-user-name">
                    Samir Aguilar<br>
                    <span id="user-role" style="font-size:12px; font-weight:normal; color:#666;">
                        Personal de cocina
                    </span>
                </span>
                <div class="header-user-avatar">
                    <span class="user-icon">ğŸ‘¨â€ğŸ³</span>
                    <span class="dropdown-icon" id="dropdown-icon">â–¼</span>
                </div>
            </div>
        </div>

        <!-- âœ… MENÃš DESPLEGABLE -->
        <div class="user-dropdown" id="user-dropdown">
            <button class="dropdown-item" id="kds-panel-btn">KDS Panel</button>
            <button class="dropdown-item" id="control-pedidos-btn">Control de Pedidos</button>
            <button class="dropdown-item" id="logout-btn">Cerrar SesiÃ³n</button>
        </div>
    </div>

    <div class="main-container">
        <div class="orders-section">
            <div class="section-title">ğŸ”¥ Pedidos en PreparaciÃ³n</div>
            <div class="orders-grid" id="preparingOrders">
                <div class="no-orders">No hay pedidos en preparaciÃ³n</div>
            </div>
            <div class="section-title">âœ… Pedidos Listos para Entregar</div>
            <div class="orders-grid" id="readyOrders">
                <div class="no-orders">No hay pedidos listos</div>
            </div>
        </div>
        <div class="notifications-panel">
            <div class="section-title" style="color: #1e3c72; margin-bottom: 20px;">
                ğŸ”” Notificaciones Enviadas
            </div>
            <div id="notificationsList">
                <div style="text-align: center; color: #999; padding: 20px;">
                    No hay notificaciones recientes
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de ConfirmaciÃ³n -->
    <div class="modal" id="completionModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">âœ…</div>
                <div class="modal-title">Marcar como Completado</div>
            </div>
            <div class="modal-body">
                <p>Â¿EstÃ¡s seguro de que el pedido <strong id="modalOrderNumber"></strong> estÃ¡ completado y listo para
                    entregar?</p>
                <br>
                <p>Se enviarÃ¡ una notificaciÃ³n automÃ¡tica al cliente informÃ¡ndole que su pedido estÃ¡ listo.</p>
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="closeModal()">Cancelar</button>
                <button class="btn success" onclick="confirmCompletion()">âœ… Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Entrega -->
    <div class="modal" id="deliveryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">ğŸš€</div>
                <div class="modal-title">Confirmar Entrega</div>
            </div>
            <div class="modal-body">
                <p>Â¿Confirmas que el pedido <strong id="deliveryModalOrderNumber"></strong> ha sido entregado al
                    cliente?</p>
                <br>
                <p>Esta acciÃ³n moverÃ¡ el pedido al historial de completados.</p>
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="closeDeliveryModal()">Cancelar</button>
                <button class="btn success" onclick="confirmDelivery()">ğŸš€ Entregar</button>
            </div>
        </div>
    </div>
    
<!-- Modal de confirmaciÃ³n de cierre de sesiÃ³n -->
<div class="logout-modal-overlay" id="logoutConfirmModal">
  <div class="logout-modal">
    <div class="logout-modal-body">
      <h3>Â¿Deseas cerrar sesiÃ³n?</h3>
    </div>
    <div class="logout-modal-footer">
      <button class="btn" id="logoutCancelBtn">Cancelar</button>
      <button class="btn btn-danger" id="logoutConfirmBtn">Cerrar sesiÃ³n</button>
    </div>
  </div>
</div>

    <script src="js/ControlKDS.js"></script>
</body>
</html>